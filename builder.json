{
    "name": "aws-crt-ruby",
    "packages": [
        "ruby"
    ],
    "targets": {
        "linux": {
            "variables": {
                "openssl_include": "/opt/openssl/include",
                "openssl_lib": "/opt/openssl/lib"
            }
        },
        "manylinux": {
            "!build_steps": [
                "manylinux-ci"
            ]
        }
    },
    "build_steps": [
        "gpg --keyserver hkp://pool.sks-keyservers.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB",
        "curl -sSL https://get.rvm.io | bash -s stable",
        "source $HOME/.rvm/scripts/rvm",
        "rvm install 2.6.5",
        "gem install bundler",
        "cd aws-crt && bundle install",
        "cd aws-crt && bundle exec rake spec"
    ],
    "hosts": {
        "macos": {
            "_comment": "ruby already installed",
            "!packages": []
        }
    }
}
